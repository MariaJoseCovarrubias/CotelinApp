{"ast":null,"code":"var _jsxFileName = \"/Users/cotelina/Desktop/CotelinApp/src/Mapa.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Mapa() {\n  _s();\n  useEffect(() => {\n    let email = \"mcovarrubias@uc.cl\";\n    let password = \"18640729\";\n    const payload = {\n      \"type\": \"JOIN\",\n      \"payload\": {\n        \"authorization\": `Basic ${btoa(`${email}:${password}`)}`\n      }\n    };\n    const socket = new WebSocket(\"wss://tarea2-2023-1-dev-z2fqxmm2ja-uc.a.run.app/connect\"); // replace with your server's URL\n    socket.onopen = () => {\n      console.log('WebSocket connection established.');\n      socket.send(JSON.stringify(payload));\n    };\n    socket.addEventListener(\"message\", _ref => {\n      let {\n        data\n      } = _ref;\n      const event = JSON.parse(data);\n      demo.innerHTML = `Got <b>${event.type}</b> event:<br><br>${JSON.stringify(event.payload)}`;\n      if (event.type == 'RESTAURANTS') {\n        // recorremos los restaurantes y agregamos un marker para cada uno:\n        event.payload.forEach(r => {\n          if (!(r.id in restaurants)) {\n            restaurants[r.id] = r;\n            var marker = L.marker([r.position.lat, r.position.long]);\n            marker.bindTooltip(r.name);\n            marker.addTo(map);\n            // puede ser util guardar la referencia al marker de cada restaurante\n            r.marker = marker;\n          }\n        });\n      } else if (event.type == 'DESTINATIONS') {\n        // lo mismo para los destinos\n        event.payload.forEach(d => {\n          if (!(d.id in destinations)) {\n            destinations[d.id] = d;\n            var marker = L.marker([d.position.lat, d.position.long], {\n              icon: redIcon\n            });\n            marker.bindTooltip(d.name);\n            marker.addTo(map);\n            d.marker = marker;\n          }\n        });\n      }\n    });\n  }, []); // empty dependency array ensures this effect only runs once\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"WebSocket Example\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(Mapa, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = Mapa;\nexport default Mapa;\nvar _c;\n$RefreshReg$(_c, \"Mapa\");","map":{"version":3,"names":["React","useEffect","jsxDEV","_jsxDEV","Mapa","_s","email","password","payload","btoa","socket","WebSocket","onopen","console","log","send","JSON","stringify","addEventListener","_ref","data","event","parse","demo","innerHTML","type","forEach","r","id","restaurants","marker","L","position","lat","long","bindTooltip","name","addTo","map","d","destinations","icon","redIcon","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/cotelina/Desktop/CotelinApp/src/Mapa.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\n\nfunction Mapa() {\n\n  useEffect(() => {\n    let email = \"mcovarrubias@uc.cl\";\n    let password = \"18640729\";\n    const payload = {\n        \"type\": \"JOIN\",\n        \"payload\": {\n            \"authorization\": `Basic ${btoa(`${email}:${password}`)}`\n        }\n    }\n    const socket = new WebSocket(\"wss://tarea2-2023-1-dev-z2fqxmm2ja-uc.a.run.app/connect\"); // replace with your server's URL\n    socket.onopen = () => {\n      console.log('WebSocket connection established.');\n      socket.send(JSON.stringify(payload));\n      \n    };\n\n    socket.addEventListener(\"message\", ({ data }) => {\n        const event = JSON.parse(data);\n        demo.innerHTML = `Got <b>${event.type}</b> event:<br><br>${JSON.stringify(event.payload)}`;\n        if (event.type == 'RESTAURANTS') {\n            // recorremos los restaurantes y agregamos un marker para cada uno:\n            event.payload.forEach(r => {\n                if (!(r.id in restaurants)) {\n                    restaurants[r.id] = r\n                    var marker = L.marker([r.position.lat, r.position.long])\n                    marker.bindTooltip(r.name);\n                    marker.addTo(map);\n                    // puede ser util guardar la referencia al marker de cada restaurante\n                    r.marker = marker;\n                }\n            });\n        } else if (event.type == 'DESTINATIONS') {\n            // lo mismo para los destinos\n            event.payload.forEach(d => {\n                if (!(d.id in destinations)) {\n                    destinations[d.id] = d\n                    var marker = L.marker([d.position.lat, d.position.long], {icon: redIcon})\n                    marker.bindTooltip(d.name);\n                    marker.addTo(map);\n                    d.marker = marker;\n                }\n            });\n        }\n    });\n    \n  }, []); // empty dependency array ensures this effect only runs once\n\n  return (\n    <div className=\"App\">\n      <h1>WebSocket Example</h1>\n    </div>\n  );\n}\n\nexport default Mapa;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}